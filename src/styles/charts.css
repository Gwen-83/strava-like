/* Container stacking and spacing */
.charts-grid {
  display: flex;
  flex-direction: column;
  gap: 18px;
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
}

/* Card style for charts */
.chart-card {
  width: 100%;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 8px 22px rgba(2,6,23,0.5);
  border: 1px solid rgba(255,255,255,0.03);
  position: relative; /* Added position relative for absolute positioning of help button */
}

/* Headings inside cards */
.chart-card h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
  color: var(--text);
}

/* Recharts text styling for better contrast */
.recharts-cartesian-axis-tick text {
  fill: var(--text);
  font-size: 12px;
}
.recharts-legend-item text {
  fill: var(--text);
  font-size: 13px;
}
.recharts-tooltip-wrapper {
  font-size: 13px;
}

/* Make charts more compact on small screens */
@media (max-width:900px) {
  .chart-card { padding: 10px }
  .chart-card h3 { font-size: 15px }
  /* Slightly reduce help button and overlay padding */
  .chart-help-button { top: 8px; right: 8px; width: 32px; height: 32px; font-size: 13px; }
  .chart-help-content { padding: 10px 12px; max-width: 92%; }
  /* Ensure chart containers can shrink cleanly */
  .charts-grid { padding-left: 10px; padding-right: 10px; }
}

/* Tooltip dark theme for better contrast */
.recharts-tooltip-wrapper,
.recharts-tooltip-wrapper .recharts-default-tooltip,
.recharts-tooltip-wrapper .recharts-tooltip,
.recharts-tooltip-wrapper .recharts-tooltip-inner {
  background: rgba(6, 8, 20, 0.95) !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: 0 6px 20px rgba(2,6,23,0.6) !important;
  border-radius: 8px !important;
  padding: 8px 10px !important;
  font-size: 13px !important;
}

/* Label (date) */
.recharts-tooltip-wrapper .recharts-tooltip-label {
  color: var(--text) !important;
  font-weight: 600;
  font-size: 13px;
  margin-bottom: 6px;
}

/* Items (series name + value) */
.recharts-tooltip-wrapper .recharts-tooltip-item,
.recharts-tooltip-wrapper .recharts-tooltip-item-list,
.recharts-tooltip-wrapper .recharts-tooltip-item-name,
.recharts-tooltip-wrapper .recharts-tooltip-item-value {
  color: var(--text) !important;
  font-size: 13px;
}

/* Value emphasis (keep value readable) */
.recharts-tooltip-wrapper .recharts-tooltip-item-value {
  color: var(--muted) !important;
  font-weight: 700;
}

/* Select (dark) for charts controls */
.charts-grid select {
  color: var(--text);
  background: rgba(0,0,0,0.85);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 13px;
}
.charts-grid select option {
  color: var(--text);
  background: rgba(0,0,0,0.95);
}

/* Help button style */
.chart-help-button {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.03);
  color: var(--text);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(2,6,23,0.4);
  transition: transform .12s ease;
}
.chart-help-button:hover { transform: scale(1.05); }

/* Help overlay style */
.chart-help-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg, rgba(2,6,23,0.9), rgba(2,6,23,0.95));
  z-index: 40;
  padding: 18px;
  border-radius: 12px;
}

.chart-help-content {
  width: min(680px, 92%);
  max-height: 80%;
  overflow: auto;
  background: rgba(6,8,20,0.98);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 10px;
  padding: 14px 16px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  color: var(--text);
}

.chart-help-close {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 30px;
  height: 30px;
  border-radius: 6px;
  border: none;
  background: rgba(255,255,255,0.03);
  color: var(--text);
  cursor: pointer;
  font-size: 18px;
}

/* Prevent text selection and mobile tap highlight inside charts */
.charts-grid,
.chart-card,
.chart-card * ,
.recharts-wrapper,
.recharts-surface,
.recharts-layer {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation; /* allow normal scrolling while enabling touch events */
}

/* Remove pointer cursor and interactive outlines on SVG shapes so touch only shows tooltip */
.recharts-rectangle,
.recharts-bar-rectangle,
.recharts-area-dot,
.recharts-area,
.recharts-line,
.recharts-surface svg rect,
.recharts-surface svg g {
  cursor: default !important;
  outline: none !important;
}

/* Remove hover/active visual changes for bars/areas (no stroke, no opacity change) */
.recharts-bar-rectangle:hover,
.recharts-bar-rectangle:active,
.recharts-rectangle:hover,
.recharts-area:hover,
.recharts-area-dot:hover {
  opacity: 1 !important;
  stroke: none !important;
  stroke-width: 0 !important;
  box-shadow: none !important;
}

/* Make legend non-interactive on touch */
.recharts-legend-item {
  pointer-events: none !important;
  cursor: default !important;
}

/* Ensure tooltip itself doesn't become selectable */
.recharts-tooltip-wrapper {
  -webkit-user-select: none;
  user-select: none;
}